<style lang="less">

</style>

<template>
    <div>
        <div class="i-form">
            <Form :ref="formData.rel" :model="formData.rel" :label-width="120">
                <h2 class="padding-left-small main-color padding-bottom-small text">基础信息</h2>
                <FormItem label="唯一编码：" class="formMust">
                    <Input v-model="formData.rel.coding" placeholder="请输入唯一编码" style="width:320px;"></Input>
                    <span v-if='formData.initF && formData.rel.coding == ""' class="error-mark">
                        <Icon type="close-circled"></Icon> 必填
                    </span>
                </FormItem>
                <FormItem label="品牌名称：" class="formMust">
                    <Input v-model="formData.rel.brandName" placeholder="请输入品牌名称" style="width:320px;"></Input>
                    <span v-if='formData.initF && formData.rel.brandName == ""' class="error-mark">
                        <Icon type="close-circled"></Icon> 必填
                    </span>
                </FormItem>
                <FormItem label="英文名：" class="formMust">
                    <Input v-model="formData.rel.brandEnglishName" placeholder="请输入英文品牌名称" style="width:320px;"></Input>
                    <span v-if='formData.initF && formData.rel.brandEnglishName == ""' class="error-mark">
                        <Icon type="close-circled"></Icon> 必填
                    </span>
                </FormItem>
                <FormItem label="产地：" class="formMust">
                    <Input v-model="formData.rel.origin" placeholder="请输入产地" style="width:320px;"></Input>
                    <span v-if='formData.initF && formData.rel.origin == ""' class="error-mark">
                        <Icon type="close-circled"></Icon> 必填
                    </span>
                </FormItem>
                <FormItem label="图片：" class="formMust">
                    <upload
                        :count="formData.imgUpConfig.count"
                        :defaultList="formData.imgUpConfig.defaultList"
                        :fileDir='formData.imgUpConfig.fileDir'
                        @upList="getUpList"
                    ></upload>
                    <span v-if='formData.initF && formData.rel.pictureUrl == ""' class="error-mark">
                        <Icon type="close-circled"></Icon> 必填
                    </span>
                </FormItem>
                <h2 class="padding-left-small main-color padding-bottom-small text">系列信息</h2>
                <brand-seria :brandSeriaList='brandSeriaList' ref='brandSeria'></brand-seria>
            </Form>
        </div>
    </div>
</template>

<script>
import {upload} from '@/core'
import brandSeria from './lib/brandSeria'
export default {
    name: 'bannerAdd',
    props:["name"],
    components: {
        upload,brandSeria
    },
    data () {
        return {
            brandSeriaList:[],
            formData:{
                imgUpConfig:{
                    count:1,
                    defaultList:[],
                    fileDir:'banner'
                },
                roleList:{
                    listId:"roleId",
                    listName:"roleName",
                    list:[]
                },
                initF:false,
                rel:{
                    coding:"",
                    brandName:"",
                    brandEnglishName:"",
                    origin:"",
                    pictureUrl:"",
                    brandSeria:""
                }
            }
        }
    },
    mounted () {
    },
    methods: {
        getUpList(url){
            this.formData.rel.pictureUrl = url;
        },
        save(){
            let _this = this;
            this.formData.rel.brandSeria = this.brandSeriaList.join(",");
            this.utils.resolveForm(_this,()=>{
                this.post(Api.car.brand.insert,this.formData.rel,(res)=>{
                    this.$Message.success("新增汽车品牌成功！");
                    _this.$parent.$parent.getData();
                });
            });
        },
    }
};
</script>
